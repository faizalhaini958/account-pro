import{r as N,u as C,j as e,H as b,L as F}from"./app-De9YtYVO.js";import{A as w}from"./AdminLayout-B9Mfz47I.js";import{C as l,a as c,b as d,c as m,d as P}from"./card-B1noy23o.js";import{B as x}from"./index-sqIKGjOx.js";import{I as n}from"./input-YJ4y34zb.js";import{L as i}from"./label-BNYjQoyA.js";import{T as S}from"./textarea-BrFMof27.js";import{S as L}from"./switch-EwwwBXc8.js";import{B as k}from"./badge-C9h6T3rK.js";import{S as M}from"./toaster-CljvMPLZ.js";import{A as D}from"./arrow-left-BQixkFZB.js";import{P as A}from"./package-DX_4eLNa.js";import{P as I}from"./plus-DIUrj948.js";import{X as B}from"./x-D7kv7_oa.js";import{L as T}from"./loader-circle-DjIWaf7f.js";import"./ThemeToggle-IPjgC8LT.js";import"./shield-CJZNipff.js";import"./credit-card-wln7jJg5.js";import"./users-Cw2EaZtR.js";import"./file-text-D4ZH2B6r.js";import"./index-CENxNQLL.js";import"./Combination-Dy-FKPUP.js";import"./useTranslation-CmIvGiqX.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";function ce(){const[o,h]=N.useState(""),{data:a,setData:r,post:_,processing:u,errors:t}=C({code:"",name:"",description:"",price_monthly:0,price_yearly:0,max_tenants:1,max_users_per_tenant:3,max_invoices_per_month:null,features:[],is_active:!0,sort_order:0}),y=s=>{s.preventDefault(),_(route("admin.subscription-plans.store"))},j=()=>{o.trim()&&(r("features",[...a.features,o.trim()]),h(""))},g=s=>{r("features",a.features.filter((p,f)=>f!==s))},v=()=>{const s=a.price_monthly*12;return s<=0||a.price_yearly<=0?0:Math.round((1-a.price_yearly/s)*100)};return e.jsxs(w,{header:"Create Subscription Plan",children:[e.jsx(b,{title:"Create Subscription Plan"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(F,{href:route("admin.subscription-plans.index"),children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Create Subscription Plan"}),e.jsx("p",{className:"text-muted-foreground",children:"Add a new subscription tier"})]})]}),e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Plan Details"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"code",children:"Plan Code"}),e.jsx(n,{id:"code",value:a.code,onChange:s=>r("code",s.target.value.toLowerCase().replace(/\s/g,"_")),placeholder:"e.g., basic, pro, enterprise"}),t.code&&e.jsx("p",{className:"text-sm text-destructive",children:t.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Display Name"}),e.jsx(n,{id:"name",value:a.name,onChange:s=>r("name",s.target.value),placeholder:"e.g., Basic Plan"}),t.name&&e.jsx("p",{className:"text-sm text-destructive",children:t.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx(S,{id:"description",value:a.description,onChange:s=>r("description",s.target.value),placeholder:"Brief description of this plan"})]})]})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(d,{children:"Pricing"})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"price_monthly",children:"Monthly Price (MYR)"}),e.jsx(n,{id:"price_monthly",type:"number",step:"0.01",min:"0",value:a.price_monthly,onChange:s=>r("price_monthly",parseFloat(s.target.value)||0)}),t.price_monthly&&e.jsx("p",{className:"text-sm text-destructive",children:t.price_monthly})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"price_yearly",children:"Yearly Price (MYR)"}),e.jsx(n,{id:"price_yearly",type:"number",step:"0.01",min:"0",value:a.price_yearly,onChange:s=>r("price_yearly",parseFloat(s.target.value)||0)}),t.price_yearly&&e.jsx("p",{className:"text-sm text-destructive",children:t.price_yearly}),v()>0&&e.jsxs("p",{className:"text-sm text-green-600",children:[v(),"% savings vs monthly"]})]})]})})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(d,{children:"Usage Limits"})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"max_tenants",children:"Max Companies"}),e.jsx(n,{id:"max_tenants",type:"number",min:"1",value:a.max_tenants,onChange:s=>r("max_tenants",parseInt(s.target.value)||1)}),t.max_tenants&&e.jsx("p",{className:"text-sm text-destructive",children:t.max_tenants})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"max_users_per_tenant",children:"Max Users per Company"}),e.jsx(n,{id:"max_users_per_tenant",type:"number",min:"1",value:a.max_users_per_tenant,onChange:s=>r("max_users_per_tenant",parseInt(s.target.value)||1)}),t.max_users_per_tenant&&e.jsx("p",{className:"text-sm text-destructive",children:t.max_users_per_tenant})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"max_invoices_per_month",children:"Max Invoices/Month"}),e.jsx(n,{id:"max_invoices_per_month",type:"number",min:"1",value:a.max_invoices_per_month||"",onChange:s=>r("max_invoices_per_month",s.target.value?parseInt(s.target.value):null),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty for unlimited"})]})]})})]}),e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Features"}),e.jsx(P,{children:"List the features included in this plan"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{value:o,onChange:s=>h(s.target.value),placeholder:"Add a feature...",onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),j())}}),e.jsx(x,{type:"button",variant:"secondary",onClick:j,children:e.jsx(I,{className:"h-4 w-4"})})]}),a.features.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:a.features.map((s,p)=>e.jsxs(k,{variant:"secondary",className:"gap-1",children:[s,e.jsx("button",{type:"button",onClick:()=>g(p),className:"ml-1 hover:text-destructive",children:e.jsx(B,{className:"h-3 w-3"})})]},p))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(d,{children:"Status"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make plan available for selection"})]}),e.jsx(L,{checked:a.is_active,onCheckedChange:s=>r("is_active",s)})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"sort_order",children:"Sort Order"}),e.jsx(n,{id:"sort_order",type:"number",min:"0",value:a.sort_order,onChange:s=>r("sort_order",parseInt(s.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower numbers appear first"})]})]})]}),e.jsx(x,{type:"submit",className:"w-full",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Plan"})]})]})})]})]})}export{ce as default};
