import{j as e,H as v,L as a,a as d}from"./app-De9YtYVO.js";import{A as y}from"./AdminLayout-B9Mfz47I.js";import{C as l,a as o,b as m,c as x}from"./card-B1noy23o.js";import{B as c}from"./index-sqIKGjOx.js";import{B as _}from"./badge-C9h6T3rK.js";import{S as w}from"./switch-EwwwBXc8.js";import{T as C,a as P,b as h,c as r,d as T,e as i}from"./table-3xAxy9mO.js";import{D as M,a as S,b as D,d as A,c as u,e as k}from"./dropdown-menu-BBgrL1DT.js";import{P as j}from"./plus-DIUrj948.js";import{P as p}from"./package-DX_4eLNa.js";import{U as B}from"./users-Cw2EaZtR.js";import{E as H}from"./ellipsis-yQlqSxW1.js";import{P as L}from"./pencil-DxiAzbLY.js";import{T as E}from"./trash-2-Dreerc3R.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./useTranslation-CmIvGiqX.js";import"./input-YJ4y34zb.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./ThemeToggle-IPjgC8LT.js";import"./shield-CJZNipff.js";import"./credit-card-wln7jJg5.js";import"./file-text-D4ZH2B6r.js";import"./index-CENxNQLL.js";function de({plans:t}){const f=s=>{d.post(route("admin.subscription-plans.toggle",s.id),{},{preserveScroll:!0})},g=s=>{if(s.active_subscriptions_count>0){alert("Cannot delete plan with active subscriptions.");return}confirm(`Are you sure you want to delete "${s.name}"?`)&&d.delete(route("admin.subscription-plans.destroy",s.id))},n=s=>new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:0}).format(s);return e.jsxs(y,{header:"Subscription Plans",children:[e.jsx(v,{title:"Subscription Plans"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Subscription Plans"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans and pricing"})]}),e.jsx(c,{asChild:!0,children:e.jsxs(a,{href:route("admin.subscription-plans.create"),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Add Plan"]})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Plans (",t.length,")"]})}),e.jsx(x,{children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(p,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No subscription plans configured."}),e.jsx(c,{asChild:!0,className:"mt-4",children:e.jsxs(a,{href:route("admin.subscription-plans.create"),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Create First Plan"]})})]}):e.jsxs(C,{children:[e.jsx(P,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Plan"}),e.jsx(r,{children:"Monthly Price"}),e.jsx(r,{children:"Yearly Price"}),e.jsx(r,{children:"Limits"}),e.jsx(r,{children:"Subscribers"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(T,{children:t.map(s=>e.jsxs(h,{children:[e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.code})]})}),e.jsx(i,{className:"font-medium",children:n(s.price_monthly)}),e.jsxs(i,{className:"font-medium",children:[n(s.price_yearly),s.price_yearly<s.price_monthly*12&&e.jsxs(_,{variant:"secondary",className:"ml-2 text-xs",children:["Save ",Math.round((1-s.price_yearly/(s.price_monthly*12))*100),"%"]})]}),e.jsx(i,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[s.max_tenants," companies"]}),e.jsxs("div",{children:[s.max_users_per_tenant," users/company"]}),e.jsx("div",{children:s.max_invoices_per_month?`${s.max_invoices_per_month} invoices/mo`:"Unlimited invoices"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.active_subscriptions_count})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{checked:s.is_active,onCheckedChange:()=>f(s)}),e.jsx("span",{className:"text-sm",children:s.is_active?"Active":"Inactive"})]})}),e.jsx(i,{className:"text-right",children:e.jsxs(M,{children:[e.jsx(S,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(D,{align:"end",children:[e.jsx(A,{children:"Actions"}),e.jsx(u,{asChild:!0,children:e.jsxs(a,{href:route("admin.subscription-plans.edit",s.id),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsx(k,{}),e.jsxs(u,{onClick:()=>g(s),className:"text-destructive",disabled:s.active_subscriptions_count>0,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]})})]}),t.length>0&&e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(m,{children:"Plan Features Overview"})}),e.jsx(x,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:t.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:s.name}),s.features&&s.features.length>0?e.jsx("ul",{className:"text-sm space-y-1",children:s.features.map((N,b)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),N]},b))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No features defined"})]},s.id))})})]})]})]})}export{de as default};
