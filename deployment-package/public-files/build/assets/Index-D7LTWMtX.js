import{r as S,j as e,H as T,L as D,a as c}from"./app-De9YtYVO.js";import{D as E}from"./DashboardLayout-DB0kk3mn.js";import{B as n}from"./index-sqIKGjOx.js";import{T as A,a as F,b as u,c as d,d as k,e as i}from"./table-3xAxy9mO.js";import{B as H}from"./badge-C9h6T3rK.js";import{I as x}from"./input-YJ4y34zb.js";import{L as o}from"./label-BNYjQoyA.js";import{S as h,a as p,b as j,c as g,d as v}from"./select-B2rqhBdx.js";import{C as f,a as I,b as M,c as L}from"./card-B1noy23o.js";import{u as B}from"./useTranslation-CmIvGiqX.js";import{D as V}from"./download-BXIOEe-u.js";import{F as R}from"./funnel-5KC1XgG8.js";import{E as z}from"./eye-BecJcslc.js";import{C as P}from"./chevron-left-BEvpDX_2.js";import{C as U}from"./dropdown-menu-BBgrL1DT.js";import{f as q}from"./format-BS8Ay9AX.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./dialog-B_EPHwqc.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";function Ne({logs:t,events:N,models:y,filters:m}){const{t:s}=B(),[r,l]=S.useState(m),_=()=>{c.get(route("audit-logs.index"),r,{preserveState:!0,preserveScroll:!0})},C=()=>{l({}),c.get(route("audit-logs.index"),{},{preserveState:!0})},b=a=>{switch(a){case"created":return"default";case"updated":return"secondary";case"deleted":return"destructive";case"role_changed":case"permissions_synced":return"outline";default:return"secondary"}},w=()=>{window.location.href=route("audit-logs.export",r)};return e.jsxs(E,{header:s("auditLog.title","Audit Logs"),children:[e.jsx(T,{title:s("auditLog.title","Audit Logs")}),e.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:s("auditLog.title","Audit Logs")}),e.jsx("p",{className:"text-muted-foreground",children:s("auditLog.description","View all system activity and changes")})]}),e.jsxs(n,{onClick:w,variant:"outline",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("auditLog.export","Export")]})]}),e.jsxs(f,{children:[e.jsx(I,{className:"pb-3",children:e.jsxs(M,{className:"text-base flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),s("auditLog.filters","Filters")]})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:s("auditLog.event","Event")}),e.jsxs(h,{value:r.event||"",onValueChange:a=>l({...r,event:a||void 0}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:s("auditLog.allEvents","All Events")})}),e.jsx(g,{children:N.map(a=>e.jsx(v,{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:s("auditLog.model","Model")}),e.jsxs(h,{value:r.model||"",onValueChange:a=>l({...r,model:a||void 0}),children:[e.jsx(p,{children:e.jsx(j,{placeholder:s("auditLog.allModels","All Models")})}),e.jsx(g,{children:y.map(a=>e.jsx(v,{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:s("auditLog.fromDate","From Date")}),e.jsx(x,{type:"date",value:r.from_date||"",onChange:a=>l({...r,from_date:a.target.value||void 0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:s("auditLog.toDate","To Date")}),e.jsx(x,{type:"date",value:r.to_date||"",onChange:a=>l({...r,to_date:a.target.value||void 0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:s("auditLog.search","Search")}),e.jsx(x,{type:"text",placeholder:s("auditLog.searchPlaceholder","Search values..."),value:r.search||"",onChange:a=>l({...r,search:a.target.value||void 0})})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(n,{onClick:_,children:s("auditLog.apply","Apply")}),e.jsx(n,{variant:"outline",onClick:C,children:s("auditLog.clear","Clear")})]})]})})]}),e.jsx(f,{children:e.jsx(L,{className:"p-0",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs(u,{children:[e.jsx(d,{children:s("auditLog.dateTime","Date/Time")}),e.jsx(d,{children:s("auditLog.user","User")}),e.jsx(d,{children:s("auditLog.event","Event")}),e.jsx(d,{children:s("auditLog.model","Model")}),e.jsx(d,{children:s("auditLog.recordId","Record ID")}),e.jsx(d,{children:s("auditLog.ipAddress","IP Address")}),e.jsx(d,{className:"w-[80px]",children:s("auditLog.actions","Actions")})]})}),e.jsx(k,{children:t.data.length===0?e.jsx(u,{children:e.jsx(i,{colSpan:7,className:"text-center text-muted-foreground py-8",children:s("auditLog.noLogs","No audit logs found")})}):t.data.map(a=>e.jsxs(u,{children:[e.jsx(i,{className:"font-mono text-sm",children:q(new Date(a.created_at),"yyyy-MM-dd HH:mm:ss")}),e.jsx(i,{children:a.user?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.user.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.user.email})]}):e.jsx("span",{className:"text-muted-foreground",children:s("auditLog.system","System")})}),e.jsx(i,{children:e.jsx(H,{variant:b(a.event),children:a.event_label})}),e.jsx(i,{className:"font-mono text-sm",children:a.model_name}),e.jsx(i,{className:"font-mono text-sm",children:a.auditable_id}),e.jsx(i,{className:"font-mono text-sm",children:a.ip_address}),e.jsx(i,{children:e.jsx(n,{asChild:!0,size:"sm",variant:"ghost",children:e.jsx(D,{href:route("audit-logs.show",a.id),children:e.jsx(z,{className:"h-4 w-4"})})})})]},a.id))})]})})}),t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("auditLog.showing","Showing {{from}} to {{to}} of {{total}} entries",{from:(t.current_page-1)*t.per_page+1,to:Math.min(t.current_page*t.per_page,t.total),total:t.total})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>c.get(route("audit-logs.index",{...m,page:t.current_page-1})),disabled:t.current_page===1,children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-sm",children:s("auditLog.page","Page {{current}} of {{last}}",{current:t.current_page,last:t.last_page})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>c.get(route("audit-logs.index",{...m,page:t.current_page+1})),disabled:t.current_page===t.last_page,children:e.jsx(U,{className:"h-4 w-4"})})]})]})]})]})}export{Ne as default};
