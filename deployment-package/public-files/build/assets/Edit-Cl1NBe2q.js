import{r as y,u as D,j as e,H as k,L as f}from"./app-De9YtYVO.js";import{D as z}from"./DashboardLayout-DB0kk3mn.js";import{C,a as M,b as E,d as V,c as S}from"./card-B1noy23o.js";import{B as d}from"./index-sqIKGjOx.js";import{I as n}from"./input-YJ4y34zb.js";import{L as i}from"./label-BNYjQoyA.js";import{S as I}from"./switch-EwwwBXc8.js";import{S as o,a as m,b as x,c as h,d as c}from"./select-B2rqhBdx.js";import{A as P,t as U,v as G}from"./toaster-CljvMPLZ.js";import{T as H,a as Y,b as v,c as _}from"./tabs-AeUBpvoT.js";import{A as K}from"./arrow-left-BQixkFZB.js";import{C as O}from"./camera-BMR4vLdP.js";import{L as B}from"./loader-circle-DjIWaf7f.js";import"./Combination-Dy-FKPUP.js";import"./dropdown-menu-BBgrL1DT.js";import"./dialog-B_EPHwqc.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./useTranslation-CmIvGiqX.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";function ye({company:t,coa_assets:w,coa_income:F,coa_liabilities:A}){const[b,N]=y.useState(null),u=y.useRef(null),{data:r,setData:l,post:L,processing:p,errors:a}=D({name:t.name||"",email:t.email||"",phone:t.phone||"",ssm_number:t.ssm_number||"",sst_number:t.sst_number||"",address_1:t.address_1||t.address||"",address_2:t.address_2||"",city:t.city||"",state:t.state||"",postcode:t.postcode||"",country:t.country||"Malaysia",website:t.website||"",currency:t.currency||"MYR",timezone:t.timezone||"Asia/Kuala_Lumpur",financial_year_start:t.financial_year_start||"",sst_enabled:t.sst_enabled||!1,sst_rate:t.sst_rate||6,logo:null,gl_settings:{ar_account:t.gl_settings?.ar_account||"",sales_account:t.gl_settings?.sales_account||"",tax_account:t.gl_settings?.tax_account||""},_method:"PATCH"}),T=s=>{const j=s.target.files?.[0];if(j){l("logo",j);const g=new FileReader;g.onloadend=()=>{N(g.result)},g.readAsDataURL(j)}},R=s=>{s.preventDefault(),L(route("companies.update",t.id),{forceFormData:!0})};return e.jsxs(z,{children:[e.jsx(k,{title:`Edit ${t.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{variant:"outline",size:"icon",asChild:!0,children:e.jsx(f,{href:route("companies.index"),children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Company"}),e.jsx("p",{className:"text-muted-foreground",children:t.name})]})]}),e.jsx("form",{onSubmit:R,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(C,{children:[e.jsxs(M,{children:[e.jsx(E,{children:"Company Logo"}),e.jsx(V,{children:"This logo will appear on your invoices and documents"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{onClick:()=>u.current?.click(),className:"cursor-pointer group relative",children:[e.jsxs(P,{className:"h-24 w-24 border-2 border-muted",children:[e.jsx(U,{src:b||t.logo_url||void 0,className:"object-cover"}),e.jsx(G,{className:"text-xl font-bold bg-primary/10 text-primary",children:r.name.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 rounded-full transition-opacity",children:e.jsx(O,{className:"text-white h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the avatar to upload a new logo."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",type:"button",onClick:()=>u.current?.click(),children:"Upload New"}),(b||t.logo_url)&&e.jsx(d,{variant:"ghost",size:"sm",type:"button",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>{l("logo",null),N(null)},children:"Remove"})]})]}),e.jsx("input",{type:"file",ref:u,className:"hidden",accept:"image/*",onChange:T})]})})]}),e.jsx(C,{children:e.jsx(S,{className:"pt-6",children:e.jsxs(H,{defaultValue:"company",className:"w-full",children:[e.jsxs(Y,{className:"w-full justify-start border-b rounded-none p-0 h-auto bg-transparent mb-6",children:[e.jsx(v,{value:"company",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"Company & Address"}),e.jsx(v,{value:"settings",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"Operational Settings"}),e.jsx(v,{value:"gl",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:"GL Account Mapping"})]}),e.jsxs(_,{value:"company",className:"space-y-6 mt-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Company Name *"}),e.jsx(n,{id:"name",value:r.name,onChange:s=>l("name",s.target.value),required:!0}),a.name&&e.jsx("p",{className:"text-sm text-destructive",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ssm_number",children:"SSM Registration Number"}),e.jsx(n,{id:"ssm_number",value:r.ssm_number,onChange:s=>l("ssm_number",s.target.value)}),a.ssm_number&&e.jsx("p",{className:"text-sm text-destructive",children:a.ssm_number})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:r.email,onChange:s=>l("email",s.target.value)}),a.email&&e.jsx("p",{className:"text-sm text-destructive",children:a.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"phone",children:"Phone"}),e.jsx(n,{id:"phone",value:r.phone,onChange:s=>l("phone",s.target.value)}),a.phone&&e.jsx("p",{className:"text-sm text-destructive",children:a.phone})]})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(i,{htmlFor:"website",children:"Website"}),e.jsx(n,{id:"website",type:"url",placeholder:"https://example.com",value:r.website,onChange:s=>l("website",s.target.value)}),a.website&&e.jsx("p",{className:"text-sm text-destructive",children:a.website})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Address"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"address_1",children:"Address Line 1"}),e.jsx(n,{id:"address_1",value:r.address_1,onChange:s=>l("address_1",s.target.value),placeholder:"Street address"}),a.address_1&&e.jsx("p",{className:"text-sm text-destructive",children:a.address_1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"address_2",children:"Address Line 2 (Optional)"}),e.jsx(n,{id:"address_2",value:r.address_2,onChange:s=>l("address_2",s.target.value),placeholder:"Apartment, suite, etc."}),a.address_2&&e.jsx("p",{className:"text-sm text-destructive",children:a.address_2})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"postcode",children:"Postcode"}),e.jsx(n,{id:"postcode",value:r.postcode,onChange:s=>l("postcode",s.target.value)}),a.postcode&&e.jsx("p",{className:"text-sm text-destructive",children:a.postcode})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"city",children:"City"}),e.jsx(n,{id:"city",value:r.city,onChange:s=>l("city",s.target.value)}),a.city&&e.jsx("p",{className:"text-sm text-destructive",children:a.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"state",children:"State"}),e.jsx(n,{id:"state",value:r.state,onChange:s=>l("state",s.target.value)}),a.state&&e.jsx("p",{className:"text-sm text-destructive",children:a.state})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"country",children:"Country"}),e.jsx(n,{id:"country",value:r.country,onChange:s=>l("country",s.target.value)}),a.country&&e.jsx("p",{className:"text-sm text-destructive",children:a.country})]})]})]})]}),e.jsxs(_,{value:"settings",className:"space-y-6 mt-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Regional Settings"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"currency",children:"Currency"}),e.jsxs(o,{value:r.currency,onValueChange:s=>l("currency",s),children:[e.jsx(m,{children:e.jsx(x,{})}),e.jsxs(h,{children:[e.jsx(c,{value:"MYR",children:"MYR - Malaysian Ringgit"}),e.jsx(c,{value:"USD",children:"USD - US Dollar"}),e.jsx(c,{value:"SGD",children:"SGD - Singapore Dollar"})]})]}),a.currency&&e.jsx("p",{className:"text-sm text-destructive",children:a.currency})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(o,{value:r.timezone,onValueChange:s=>l("timezone",s),children:[e.jsx(m,{children:e.jsx(x,{})}),e.jsxs(h,{children:[e.jsx(c,{value:"Asia/Kuala_Lumpur",children:"Asia/Kuala_Lumpur"}),e.jsx(c,{value:"Asia/Singapore",children:"Asia/Singapore"})]})]}),a.timezone&&e.jsx("p",{className:"text-sm text-destructive",children:a.timezone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"financial_year_start",children:"Financial Year Start"}),e.jsx(n,{id:"financial_year_start",type:"date",value:r.financial_year_start,onChange:s=>l("financial_year_start",s.target.value)}),a.financial_year_start&&e.jsx("p",{className:"text-sm text-destructive",children:a.financial_year_start})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Tax Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"sst_number",children:"SST Registration Number"}),e.jsx(n,{id:"sst_number",value:r.sst_number,onChange:s=>l("sst_number",s.target.value)}),a.sst_number&&e.jsx("p",{className:"text-sm text-destructive",children:a.sst_number})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"sst_enabled",children:"Enable SST"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable Sales and Service Tax for this company"})]}),e.jsx(I,{id:"sst_enabled",checked:r.sst_enabled,onCheckedChange:s=>l("sst_enabled",s)})]}),r.sst_enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"sst_rate",children:"Default SST Rate (%)"}),e.jsx(n,{id:"sst_rate",type:"number",step:"0.01",min:"0",max:"100",className:"w-1/3",value:r.sst_rate,onChange:s=>l("sst_rate",parseFloat(s.target.value))}),a.sst_rate&&e.jsx("p",{className:"text-sm text-destructive",children:a.sst_rate})]})]})]})]}),e.jsx(_,{value:"gl",className:"space-y-6 mt-0",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"GL Account Mapping"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Map default accounts for system transactions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ar_account",children:"Accounts Receivable (Debtors)"}),e.jsxs(o,{value:r.gl_settings.ar_account,onValueChange:s=>l("gl_settings",{...r.gl_settings,ar_account:s}),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select account"})}),e.jsx(h,{children:w.map(s=>e.jsxs(c,{value:s.code,children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"sales_account",children:"Sales / Revenue"}),e.jsxs(o,{value:r.gl_settings.sales_account,onValueChange:s=>l("gl_settings",{...r.gl_settings,sales_account:s}),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select account"})}),e.jsx(h,{children:F.map(s=>e.jsxs(c,{value:s.code,children:[s.code," - ",s.name]},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(i,{htmlFor:"tax_account",children:"Tax Payable (SST Output)"}),e.jsxs(o,{value:r.gl_settings.tax_account,onValueChange:s=>l("gl_settings",{...r.gl_settings,tax_account:s}),children:[e.jsx(m,{className:"w-1/2",children:e.jsx(x,{placeholder:"Select account"})}),e.jsx(h,{children:A.map(s=>e.jsxs(c,{value:s.code,children:[s.code," - ",s.name]},s.id))})]})]})]})})]})})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(d,{type:"button",variant:"outline",asChild:!0,children:e.jsx(f,{href:route("companies.index"),children:"Cancel"})}),e.jsxs(d,{type:"submit",disabled:p,children:[p&&e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Saving...":"Save Changes"]})]})]})})]})]})}export{ye as default};
