import{u as b,r as f,j as e,H as y,L as d}from"./app-De9YtYVO.js";import{A as g}from"./AdminLayout-B9Mfz47I.js";import{c as x,B as n}from"./index-sqIKGjOx.js";import{C as N,a as w,b as C,d as k,c as _}from"./card-B1noy23o.js";import{I as m}from"./input-YJ4y34zb.js";import{L as c}from"./label-BNYjQoyA.js";import{T as h}from"./textarea-BrFMof27.js";import{S}from"./switch-EwwwBXc8.js";import{A,a as T}from"./alert-B1Pq75Rz.js";import{S as L}from"./save-DXCDbh1p.js";import{A as E}from"./arrow-left-BQixkFZB.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./useTranslation-CmIvGiqX.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./ThemeToggle-IPjgC8LT.js";import"./badge-C9h6T3rK.js";import"./shield-CJZNipff.js";import"./credit-card-wln7jJg5.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./file-text-D4ZH2B6r.js";import"./index-CENxNQLL.js";const D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],F=x("info",D);const H=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],M=x("rotate-ccw",H);function ce({template:s}){const{data:i,setData:r,put:p,processing:l,errors:a}=b({name:s.name,subject:s.subject,content:s.content,description:s.description,is_active:s.is_active}),[o,u]=f.useState(!1),j=t=>{t.preventDefault(),p(route("admin.email-templates.update",s.id))},v=()=>{confirm("Are you sure you want to reset this template to default? This action cannot be undone.")&&(window.location.href=route("admin.email-templates.reset",s.id))};return e.jsxs(g,{header:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(d,{href:route("admin.email-templates.index"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsx("h2",{className:"text-xl font-semibold leading-tight",children:"Edit Email Template"})]})}),children:[e.jsx(y,{title:`Edit ${s.name}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs(N,{children:[e.jsxs(w,{children:[e.jsx(C,{children:s.name}),e.jsxs(k,{children:["Category: ",s.category.charAt(0).toUpperCase()+s.category.slice(1)," â€¢ Key: ",e.jsx("code",{className:"text-xs",children:s.key})]})]}),e.jsxs(_,{className:"space-y-6",children:[s.description&&e.jsxs(A,{children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(T,{children:s.description})]}),s.variables&&s.variables.length>0&&e.jsxs("div",{children:[e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>u(!o),className:"mb-2",children:[o?"Hide":"Show"," Available Variables"]}),o&&e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Use these variables in your template:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:s.variables.map(t=>e.jsxs("code",{className:"text-xs bg-background px-2 py-1 rounded border cursor-pointer hover:bg-accent",onClick:()=>{navigator.clipboard.writeText(`{{${t}}}`)},title:"Click to copy",children:["{{",t,"}}"]},t))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click any variable to copy. Paste it into the content below."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"Template Name"}),e.jsx(m,{id:"name",value:i.name,onChange:t=>r("name",t.target.value),className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject",children:"Email Subject"}),e.jsx(m,{id:"subject",value:i.subject,onChange:t=>r("subject",t.target.value),className:a.subject?"border-red-500":"",placeholder:"Use {{variable_name}} for dynamic content"}),a.subject&&e.jsx("p",{className:"text-sm text-red-600",children:a.subject})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"content",children:"Email Content (HTML)"}),e.jsx(h,{id:"content",value:i.content,onChange:t=>r("content",t.target.value),className:`font-mono text-sm ${a.content?"border-red-500":""}`,rows:20,placeholder:"Use {{variable_name}} for dynamic content"}),a.content&&e.jsx("p",{className:"text-sm text-red-600",children:a.content}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"HTML is supported. The content will be wrapped with the email layout automatically."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description (optional)"}),e.jsx(h,{id:"description",value:i.description||"",onChange:t=>r("description",t.target.value),rows:3,placeholder:"Add notes about when this template is used..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{id:"is_active",checked:i.is_active,onCheckedChange:t=>r("is_active",t)}),e.jsx(c,{htmlFor:"is_active",children:"Template is active"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{type:"button",variant:"outline",onClick:v,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Reset to Default"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"button",variant:"outline",asChild:!0,children:e.jsx(d,{href:route("admin.email-templates.preview",s.id),children:"Preview"})}),e.jsxs(n,{type:"submit",disabled:l,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),l?"Saving...":"Save Changes"]})]})]})]})})})]})}export{ce as default};
