import{r as p,j as e,H as C,a as t}from"./app-De9YtYVO.js";import{A as b}from"./AdminLayout-B9Mfz47I.js";import{B as k}from"./badge-C9h6T3rK.js";import{c as j,B as i}from"./index-sqIKGjOx.js";import{C as _,c as D}from"./card-B1noy23o.js";import{T,a as E,b as m,c as l,d as w,e as a}from"./table-3xAxy9mO.js";import{I as u}from"./input-YJ4y34zb.js";import{S as A,a as M,b as B,c as H,d as r}from"./select-B2rqhBdx.js";import{D as z,b as I,c as F,d as L,e as V,f as R}from"./dialog-B_EPHwqc.js";import{L as q}from"./label-BNYjQoyA.js";import{S as O}from"./search-BkjZB7Ok.js";import{B as P}from"./ban-BeVP-ciD.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./useTranslation-CmIvGiqX.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./ThemeToggle-IPjgC8LT.js";import"./shield-CJZNipff.js";import"./credit-card-wln7jJg5.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./file-text-D4ZH2B6r.js";import"./index-CENxNQLL.js";const U=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],$=j("calendar-clock",U);const G=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],J=j("play",G);function fe({subscriptions:n,filters:c}){const[d,o]=p.useState(null),[x,h]=p.useState(""),g=s=>{t.get(route("admin.subscriptions.index"),{...c,search:s},{preserveState:!0,replace:!0})},v=s=>{t.get(route("admin.subscriptions.index"),{...c,status:s==="all"?"":s},{preserveState:!0})},f=s=>{confirm("Are you sure you want to cancel this subscription?")&&t.delete(route("admin.subscriptions.destroy",s))},S=s=>{confirm("Are you sure you want to resume this subscription?")&&t.post(route("admin.subscriptions.resume",s))},y=()=>{d&&x&&t.post(route("admin.subscriptions.extend",d.id),{date:x},{onSuccess:()=>{o(null),h("")}})};return e.jsxs(b,{header:"Subscription Management",children:[e.jsx(C,{title:"Admin - Subscriptions"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Subscription Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user subscriptions, plans, and billing cycles."})]}),e.jsx(_,{children:e.jsxs(D,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(O,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"Search user...",className:"pl-8",defaultValue:c.search,onChange:s=>g(s.target.value)})]}),e.jsxs(A,{defaultValue:c.status||"all",onValueChange:v,children:[e.jsx(M,{className:"w-[180px]",children:e.jsx(B,{placeholder:"Filter by Status"})}),e.jsxs(H,{children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"active",children:"Active"}),e.jsx(r,{value:"trial",children:"Trial"}),e.jsx(r,{value:"cancelled",children:"Cancelled"}),e.jsx(r,{value:"expired",children:"Expired"})]})]})]}),e.jsxs(T,{children:[e.jsx(E,{children:e.jsxs(m,{children:[e.jsx(l,{children:"User"}),e.jsx(l,{children:"Plan"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Cycle"}),e.jsx(l,{children:"Start/End"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(w,{children:n.data.length>0?n.data.map(s=>e.jsxs(m,{children:[e.jsxs(a,{children:[e.jsx("div",{className:"font-medium",children:s.user?.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.user?.email})]}),e.jsx(a,{children:s.plan?.name}),e.jsx(a,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(k,{variant:s.status==="active"?"default":"secondary",children:s.status}),s.on_trial&&e.jsx("span",{className:"text-[10px] text-orange-600 font-semibold",children:"On Trial"})]})}),e.jsx(a,{className:"capitalize",children:s.billing_cycle}),e.jsx(a,{children:e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{children:["Start: ",s.starts_at]}),e.jsxs("div",{children:["End: ",s.ends_at||"-"]}),s.trial_ends_at&&e.jsxs("div",{className:"text-orange-600",children:["Trial Ends: ",s.trial_ends_at]})]})}),e.jsx(a,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[s.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>o(s),title:"Extend Subscription",children:e.jsx($,{className:"h-4 w-4 text-blue-600"})}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>f(s.id),title:"Cancel Subscription",children:e.jsx(P,{className:"h-4 w-4 text-destructive"})})]}),s.status==="cancelled"&&e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>S(s.id),title:"Resume Subscription",children:e.jsx(J,{className:"h-4 w-4 text-green-600"})})]})})]},s.id)):e.jsx(m,{children:e.jsx(a,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No subscriptions found."})})})]}),n.last_page>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:n.links.map((s,N)=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&t.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},N))})]})})]}),e.jsx(z,{open:!!d,onOpenChange:()=>o(null),children:e.jsxs(I,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Extend Subscription"}),e.jsxs(V,{children:["Set a new end date for ",d?.user?.name,"'s subscription."]})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"date",children:"New End Date"}),e.jsx(u,{id:"date",type:"date",value:x,onChange:s=>h(s.target.value)})]})}),e.jsxs(R,{children:[e.jsx(i,{variant:"outline",onClick:()=>o(null),children:"Cancel"}),e.jsx(i,{onClick:y,disabled:!x,children:"Save Changes"})]})]})})]})}export{fe as default};
