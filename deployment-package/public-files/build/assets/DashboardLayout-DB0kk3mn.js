import{r as u,j as e,b as g,u as se,a as te,L as j}from"./app-De9YtYVO.js";import{u as re,k,l as M,m as C,A as E,t as B,v as O,C as ne,L as ae,i as ie,j as oe,n as le,o as I,p as F,q as z,w as ce,x as de,y as ue,S as H,r as pe,N as he,s as me,z as xe,a as fe,b as ge,c as je,B as ve,d as be,e as $,f as ye,g as we,h as Ce,T as Ne}from"./toaster-CljvMPLZ.js";import{c as N,k as Se,d as ke,P as D,i as Me,h as De,u as Ae,f as _e,C as Te,B as v}from"./index-sqIKGjOx.js";import{f as Re}from"./Combination-Dy-FKPUP.js";import{D as Pe,a as Le,b as Ee,d as Be,c as U,f as Oe,e as Ie,C as Fe}from"./dropdown-menu-BBgrL1DT.js";import{D as G,b as W,c as Y,d as V,e as K,f as Z}from"./dialog-B_EPHwqc.js";import{I as ze}from"./input-YJ4y34zb.js";import{L as $e}from"./label-BNYjQoyA.js";import{u as A}from"./useTranslation-CmIvGiqX.js";import{P as Ue}from"./plus-DIUrj948.js";import{F as q}from"./file-text-D4ZH2B6r.js";import{B as qe}from"./building-2-B8zwlaZI.js";import{U as He}from"./users-Cw2EaZtR.js";import{P as Ge}from"./package-DX_4eLNa.js";import{L as We}from"./LanguageSwitcher-JaZwuRsp.js";import{T as Ye}from"./ThemeToggle-IPjgC8LT.js";import{C as Ve}from"./circle-alert-nT1vmDMj.js";const Ke=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ze=N("briefcase",Ke);const Je=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Qe=N("calculator",Je);const Xe=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],es=N("receipt",Xe);const ss=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ts=N("shopping-cart",ss);var S="Collapsible",[rs]=ke(S),[ns,_]=rs(S),J=u.forwardRef((i,s)=>{const{__scopeCollapsible:n,open:t,defaultOpen:o,disabled:l,onOpenChange:c,...p}=i,[f,m]=Se({prop:t,defaultProp:o??!1,onChange:c,caller:S});return e.jsx(ns,{scope:n,disabled:l,contentId:Re(),open:f,onOpenToggle:u.useCallback(()=>m(a=>!a),[m]),children:e.jsx(D.div,{"data-state":R(f),"data-disabled":l?"":void 0,...p,ref:s})})});J.displayName=S;var Q="CollapsibleTrigger",X=u.forwardRef((i,s)=>{const{__scopeCollapsible:n,...t}=i,o=_(Q,n);return e.jsx(D.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":R(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...t,ref:s,onClick:Me(i.onClick,o.onOpenToggle)})});X.displayName=Q;var T="CollapsibleContent",ee=u.forwardRef((i,s)=>{const{forceMount:n,...t}=i,o=_(T,i.__scopeCollapsible);return e.jsx(De,{present:n||o.open,children:({present:l})=>e.jsx(as,{...t,ref:s,present:l})})});ee.displayName=T;var as=u.forwardRef((i,s)=>{const{__scopeCollapsible:n,present:t,children:o,...l}=i,c=_(T,n),[p,f]=u.useState(t),m=u.useRef(null),a=Ae(s,m),r=u.useRef(0),h=r.current,b=u.useRef(0),y=b.current,d=c.open||p,P=u.useRef(d),w=u.useRef(void 0);return u.useEffect(()=>{const x=requestAnimationFrame(()=>P.current=!1);return()=>cancelAnimationFrame(x)},[]),_e(()=>{const x=m.current;if(x){w.current=w.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const L=x.getBoundingClientRect();r.current=L.height,b.current=L.width,P.current||(x.style.transitionDuration=w.current.transitionDuration,x.style.animationName=w.current.animationName),f(t)}},[c.open,t]),e.jsx(D.div,{"data-state":R(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!d,...l,ref:a,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...i.style},children:d&&o})});function R(i){return i?"open":"closed"}var is=J;const os=is,ls=X,cs=ee;function ds(){const{isMobile:i}=re(),{t:s}=A(),{auth:n}=g().props,t=n.current_tenant,o=n.tenants||[],[l,c]=u.useState(!1),{data:p,setData:f,post:m,processing:a,errors:r,reset:h}=se({name:""}),b=d=>{te.post(route("tenant.switch"),{tenant_id:d})},y=d=>{d.preventDefault(),m(route("companies.store"),{onSuccess:()=>{c(!1),h()}})};return e.jsx(k,{children:e.jsxs(G,{open:l,onOpenChange:c,children:[e.jsx(M,{children:e.jsxs(Pe,{children:[e.jsx(Le,{asChild:!0,children:e.jsxs(C,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[e.jsxs(E,{className:"size-8 rounded-lg",children:[e.jsx(B,{src:t?.logo_url||void 0,className:"object-cover"}),e.jsx(O,{className:"rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:t?t.name.substring(0,2).toUpperCase():"CO"})]}),e.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[e.jsx("span",{className:"truncate font-semibold",children:t?t.name:s("user.selectCompany")}),e.jsx("span",{className:"truncate text-xs",children:s(t?"user.active":"user.noCompany")})]}),e.jsx(ne,{className:"ml-auto"})]})}),e.jsxs(Ee,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",align:"start",side:i?"bottom":"right",sideOffset:4,children:[e.jsx(Be,{className:"text-xs text-muted-foreground",children:s("user.teams")}),o.map(d=>e.jsxs(U,{onClick:()=>b(d.id),className:"gap-2 p-2",children:[e.jsxs(E,{className:"size-6 rounded-sm",children:[e.jsx(B,{src:d.logo_url||void 0,className:"object-cover"}),e.jsx(O,{className:"rounded-sm text-xs",children:d.name.substring(0,2).toUpperCase()})]}),d.name,t?.id===d.id&&e.jsx(Te,{className:"ml-auto h-4 w-4"}),t?.id===d.id&&e.jsxs(Oe,{children:["⌘",o.indexOf(d)+1]})]},d.name)),e.jsx(Ie,{}),e.jsxs(U,{className:"gap-2 p-2",onSelect:()=>c(!0),children:[e.jsx("div",{className:"flex size-6 items-center justify-center rounded-md border bg-background",children:e.jsx(Ue,{className:"size-4"})}),e.jsx("div",{className:"font-medium text-muted-foreground",children:s("user.addTeam")})]})]})]})}),e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsx(V,{children:"Create Company"}),e.jsx(K,{children:"Add a new company to manage."})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{htmlFor:"name",children:"Company Name"}),e.jsx(ze,{id:"name",value:p.name,onChange:d=>f("name",d.target.value),placeholder:"Acme Inc.",required:!0}),r.name&&e.jsx("p",{className:"text-sm text-red-500",children:r.name})]}),e.jsxs(Z,{children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(v,{type:"submit",disabled:a,children:"Create Company"})]})]})]})]})})}function us(){const{auth:i}=g().props,s=i.permissions||[],n=i.is_super_admin||!1,t=i.role,o=r=>n?!0:s.includes(r);return{permissions:s,role:t,isSuperAdmin:n,can:o,canAny:r=>n?!0:r.some(h=>s.includes(h)),canAll:r=>n?!0:r.every(h=>s.includes(h)),cannot:r=>!o(r),hasRole:r=>n?!0:t?.slug===r,hasAnyRole:r=>n?!0:t?r.includes(t.slug):!1,canAccessModule:r=>n?!0:s.some(h=>h.startsWith(`${r}.`))}}function ps({...i}){const{t:s}=A(),{url:n,props:t}=g(),o=t.auth.user,{can:l}=us(),c={main:[{title:s("nav.dashboard"),url:"/dashboard",icon:ae},{title:s("nav.sales"),url:"/sales",icon:ts,permission:"sales.view",isActive:!0,items:[{title:s("sales.quotations"),url:"/sales/quotations",permission:"sales.view"},{title:s("sales.invoices"),url:"/sales/invoices",permission:"sales.view"},{title:s("sales.receipts"),url:"/sales/receipts",permission:"sales.view"},{title:s("sales.creditNotes"),url:"/sales/credit-notes",permission:"sales.view"},{title:s("sales.deliveryOrders"),url:"/sales/delivery-orders",permission:"sales.view"},{title:s("sales.customers"),url:"/sales/customers",permission:"sales.view"}]},{title:s("nav.purchases"),url:"/purchase",icon:Ge,permission:"purchases.view",items:[{title:s("purchases.bills"),url:"/purchase/invoices",permission:"purchases.view"},{title:s("purchases.expenses"),url:"/purchase/expenses",permission:"purchases.view"},{title:s("purchases.payments"),url:"/purchase/payments",permission:"purchases.view"},{title:s("purchases.suppliers"),url:"/purchase/suppliers",permission:"purchases.view"},{title:s("purchases.expenseCategories"),url:"/purchase/expense-categories",permission:"purchases.view"}]},{title:s("nav.accounting"),url:"/accounting",icon:Qe,permission:"accounting.view",items:[{title:s("accounting.journalEntries"),url:"/accounting/journals",permission:"accounting.view"},{title:s("accounting.generalLedger"),url:"/accounting/general-ledger",permission:"accounting.view"},{title:s("accounting.chartOfAccounts"),url:"/accounting/coa",permission:"accounting.view"},{title:s("accounting.cashbook"),url:"/accounting/cashbook",permission:"accounting.view"},{title:s("accounting.reconciliation"),url:"/accounting/bank-accounts",permission:"accounting.view"}]},{title:s("nav.inventory"),url:"/inventory",icon:Ze,permission:"inventory.view",items:[{title:s("nav.products"),url:"/inventory/products",permission:"inventory.view"},{title:s("nav.categories"),url:"/inventory/categories",permission:"inventory.view"},{title:s("nav.stockMovements"),url:"/inventory/movements",permission:"inventory.view"}]},{title:s("nav.einvoice"),url:"/einvoice",icon:es,permission:"sales.view"}],system:[{title:s("nav.reports"),url:"/reports",icon:q,permission:"reports.view"},{title:s("nav.auditLogs"),url:"/audit-logs",icon:q,permission:"audit-log.view"},{title:s("nav.companies"),url:"/companies",icon:qe},{title:s("nav.userManagement"),url:"/master/users",icon:He,permission:"users.view"}]},p=a=>a.filter(r=>!r.permission||l(r.permission)).map(r=>({...r,items:r.items?.filter(h=>!h.permission||l(h.permission))})).filter(r=>!r.items||r.items.length>0),f=p(c.main),m=p(c.system);return e.jsxs(ie,{collapsible:"icon",...i,children:[e.jsx(oe,{children:e.jsx(ds,{})}),e.jsxs(le,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Platform"}),e.jsx(z,{children:e.jsx(k,{children:f.map(a=>e.jsx(os,{asChild:!0,defaultOpen:n.startsWith(a.url),className:"group/collapsible",children:e.jsx(M,{children:a.items&&a.items.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ls,{asChild:!0,children:e.jsxs(C,{tooltip:a.title,isActive:n.startsWith(a.url),children:[e.jsx(a.icon,{}),e.jsx("span",{children:a.title}),e.jsx(Fe,{className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsx(cs,{children:e.jsx(ce,{children:a.items.map(r=>e.jsx(de,{children:e.jsx(ue,{asChild:!0,isActive:n===r.url,children:e.jsx(j,{href:r.url,children:e.jsx("span",{children:r.title})})})},r.title))})})]}):e.jsx(C,{asChild:!0,isActive:n.startsWith(a.url),children:e.jsxs(j,{href:a.url,children:[e.jsx(a.icon,{}),e.jsx("span",{children:a.title})]})})})},a.title))})})]}),e.jsx(H,{className:"my-2"}),e.jsxs(I,{children:[e.jsx(F,{children:"System"}),e.jsx(z,{children:e.jsx(k,{children:m.map(a=>e.jsx(M,{children:e.jsx(C,{asChild:!0,isActive:n.startsWith(a.url),children:e.jsxs(j,{href:a.url,children:[e.jsx(a.icon,{}),e.jsx("span",{children:a.title})]})})},a.title))})})]})]}),e.jsxs(pe,{children:[e.jsx(he,{user:o}),e.jsx("div",{className:"p-4 text-xs text-muted-foreground text-center",children:"© 2026 BukuKira"})]}),e.jsx(me,{})]})}function hs(){const{auth:i}=g().props;i.user;const s=i.subscription;if(!s||s.status!=="active"||!s.trial_ends_at)return null;const n=new Date(s.trial_ends_at),t=new Date;if(n<t)return null;const o=Math.abs(n.getTime()-t.getTime()),l=Math.ceil(o/(1e3*60*60*24));return e.jsxs("div",{className:"bg-orange-600 text-white px-4 py-2 text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsxs("span",{children:["You have ",e.jsxs("span",{className:"font-bold",children:[l," days"]})," left in your trial. Upgrade now to avoid interruption."]})]}),e.jsx(j,{href:route("checkout.index"),children:e.jsx(v,{variant:"secondary",size:"sm",className:"bg-white text-orange-600 hover:bg-gray-100 border-none h-7",children:"Subscribe Now"})})]})}function ms(){const{auth:i}=g().props,s=i.subscription,[n,t]=u.useState(!1);return u.useEffect(()=>{if(!s||!s.trial_ends_at)return;const o=new Date(s.trial_ends_at),l=new Date,c=new Date;c.setDate(c.getDate()-3);const p=new Date(o);p.setDate(p.getDate()+3),l>o&&l<p&&t(!0)},[s]),e.jsx(G,{open:n,onOpenChange:t,children:e.jsxs(W,{className:"sm:max-w-[425px]",children:[e.jsxs(Y,{children:[e.jsx(V,{children:"Your Trial Has Ended"}),e.jsxs(K,{children:["Your 14-day trial period has expired. You can still subscribe now to keep your data and continue using AccountPro.",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-muted-foreground mt-2 block",children:"Note: This reminder will appear for 3 days after expiration."})]})]}),e.jsxs(Z,{className:"flex-col sm:justify-start gap-2",children:[e.jsx(j,{href:route("checkout.index"),className:"w-full",children:e.jsx(v,{className:"w-full bg-orange-600 hover:bg-orange-700 text-white",children:"Subscribe Now"})}),e.jsx(v,{variant:"outline",onClick:()=>t(!1),children:"Maybe Later"})]})]})})}function Rs({children:i,header:s}){const{t:n}=A(),{toast:t}=xe(),{props:o}=g(),{flash:l}=o;return u.useEffect(()=>{l?.success&&t({title:"Success",description:l.success,variant:"default"}),l?.error&&t({title:"Error",description:l.error,variant:"destructive"})},[l,t,n]),e.jsxs(fe,{children:[e.jsx(ps,{}),e.jsxs(ge,{children:[e.jsx(hs,{}),e.jsx(ms,{}),e.jsxs("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-[[data-collapsible=icon]]/sidebar-wrapper:h-12 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4",children:[e.jsx(je,{className:"-ml-1"}),e.jsx(H,{orientation:"vertical",className:"mr-2 h-4"}),e.jsx(ve,{children:e.jsxs(be,{children:[e.jsx($,{className:"hidden md:block",children:e.jsx(ye,{href:"/dashboard",children:n("nav.dashboard")})}),s&&e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"hidden md:block"}),e.jsx($,{children:e.jsx(Ce,{children:s})})]})]})})]}),e.jsxs("div",{className:"ml-auto px-4 flex items-center gap-2",children:[e.jsx(Ye,{}),e.jsx(We,{})]})]}),e.jsx("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:i})]}),e.jsx(Ne,{})]})}export{Rs as D};
