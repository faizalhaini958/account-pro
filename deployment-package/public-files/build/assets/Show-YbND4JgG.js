import{j as e,H as x,L as p}from"./app-De9YtYVO.js";import{D as h}from"./DashboardLayout-DB0kk3mn.js";import{c as f,B as j}from"./index-sqIKGjOx.js";import{B as g}from"./badge-C9h6T3rK.js";import{C as d,a as i,b as n,c as l,d as m}from"./card-B1noy23o.js";import{u as N}from"./useTranslation-CmIvGiqX.js";import{A as v}from"./arrow-left-BQixkFZB.js";import{C as y}from"./clock-iIaGELyR.js";import{U as w}from"./user-CJxw6ETj.js";import{G as L}from"./globe-BnAvlmAt.js";import{f as b}from"./format-BS8Ay9AX.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./dropdown-menu-BBgrL1DT.js";import"./input-YJ4y34zb.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./dialog-B_EPHwqc.js";import"./label-BNYjQoyA.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";const _=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],C=f("monitor",_);function se({log:s}){const{t:a}=N(),u=t=>{switch(t){case"created":return"default";case"updated":return"secondary";case"deleted":return"destructive";case"role_changed":case"permissions_synced":return"outline";default:return"secondary"}},c=t=>t==null?"-":typeof t=="boolean"?t?"Yes":"No":typeof t=="object"?JSON.stringify(t,null,2):String(t),o=(()=>{if(!s.old_values&&!s.new_values)return[];const t=new Set([...Object.keys(s.old_values||{}),...Object.keys(s.new_values||{})]);return Array.from(t).filter(r=>!["updated_at","created_at"].includes(r)).map(r=>({field:r,oldValue:s.old_values?.[r],newValue:s.new_values?.[r]}))})();return e.jsxs(h,{header:a("auditLog.detail","Audit Log Detail"),children:[e.jsx(x,{title:a("auditLog.detail","Audit Log Detail")}),e.jsxs("div",{className:"flex-1 space-y-6 p-8 pt-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(j,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(p,{href:route("audit-logs.index"),children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),a("auditLog.back","Back to Logs")]})})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(d,{children:[e.jsx(i,{children:e.jsx(n,{className:"flex items-center gap-2",children:a("auditLog.eventInfo","Event Information")})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:a("auditLog.event","Event")}),e.jsx(g,{variant:u(s.event),children:s.event_label})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:a("auditLog.model","Model")}),e.jsx("span",{className:"font-mono text-sm",children:s.model_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:a("auditLog.recordId","Record ID")}),e.jsx("span",{className:"font-mono text-sm",children:s.auditable_id})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),a("auditLog.dateTime","Date/Time")]}),e.jsx("span",{className:"font-mono text-sm",children:b(new Date(s.created_at),"yyyy-MM-dd HH:mm:ss")})]})]})]}),e.jsxs(d,{children:[e.jsx(i,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),a("auditLog.requestInfo","Request Information")]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:a("auditLog.user","User")}),s.user?e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:s.user.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.user.email})]}):e.jsx("span",{className:"text-muted-foreground",children:a("auditLog.system","System")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),a("auditLog.ipAddress","IP Address")]}),e.jsx("span",{className:"font-mono text-sm",children:s.ip_address||"-"})]}),s.user_agent&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),a("auditLog.userAgent","User Agent")]}),e.jsx("p",{className:"text-sm text-muted-foreground break-all bg-muted p-2 rounded",children:s.user_agent})]})]})]})]}),o.length>0&&e.jsxs(d,{children:[e.jsxs(i,{children:[e.jsx(n,{children:a("auditLog.changes","Changes")}),e.jsx(m,{children:a("auditLog.changesDescription","Comparison of old and new values")})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("div",{className:"font-medium mb-3 text-sm uppercase tracking-wide text-muted-foreground",children:t.field.replace(/_/g," ")}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground uppercase",children:a("auditLog.oldValue","Old Value")}),e.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 p-3 rounded font-mono text-sm whitespace-pre-wrap",children:c(t.oldValue)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground uppercase",children:a("auditLog.newValue","New Value")}),e.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 p-3 rounded font-mono text-sm whitespace-pre-wrap",children:c(t.newValue)})]})]})]},t.field))})})]}),e.jsxs(d,{children:[e.jsxs(i,{children:[e.jsx(n,{children:a("auditLog.rawData","Raw Data")}),e.jsx(m,{children:a("auditLog.rawDataDescription","Complete audit log entry in JSON format")})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.old_values&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:a("auditLog.oldValues","Old Values")}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg text-sm overflow-auto max-h-96",children:JSON.stringify(s.old_values,null,2)})]}),s.new_values&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:a("auditLog.newValues","New Values")}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg text-sm overflow-auto max-h-96",children:JSON.stringify(s.new_values,null,2)})]})]})})]})]})]})}export{se as default};
