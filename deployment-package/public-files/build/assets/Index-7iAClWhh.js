import{r as u,u as H,j as e,H as M}from"./app-De9YtYVO.js";import{D as U}from"./DashboardLayout-DB0kk3mn.js";import{B as d}from"./index-sqIKGjOx.js";import{C as x,a as h,b as j,d as L,c as v}from"./card-B1noy23o.js";import{I as i}from"./input-YJ4y34zb.js";import{L as n}from"./label-BNYjQoyA.js";import{T as z,a as B,b as T,c as k}from"./tabs-AeUBpvoT.js";import{S as b,a as y,b as N,c as f,d as _}from"./select-B2rqhBdx.js";import{A as E,t as O,v as G}from"./toaster-CljvMPLZ.js";import{u as q}from"./useTranslation-CmIvGiqX.js";import{C as J}from"./camera-BMR4vLdP.js";import{L as K}from"./loader-circle-DjIWaf7f.js";import"./Combination-Dy-FKPUP.js";import"./dropdown-menu-BBgrL1DT.js";import"./dialog-B_EPHwqc.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";function Ne({tenant:l,coa_assets:D,coa_income:I,coa_liabilities:R}){const{t:a}=q(),[C,w]=u.useState(!1),[A,S]=u.useState(null),m=u.useRef(null),g=(s,c)=>l.settings?.gl?.[s]||c,{data:t,setData:r,post:F,errors:o}=H({name:l.name||"",email:l.email||"",phone:l.phone||"",address_1:l.address_1||"",address_2:l.address_2||"",city:l.city||"",state:l.state||"",postcode:l.postcode||"",country:l.country||"Malaysia",website:l.website||"",sst_number:l.sst_number||"",sst_rate:l.sst_rate||6,logo:null,gl_settings:{ar_account:g("ar_account","1200"),sales_account:g("sales_account","4001"),tax_account:g("tax_account","2102")}}),P=s=>{const c=s.target.files?.[0];if(c){r("logo",c);const p=new FileReader;p.onloadend=()=>{S(p.result)},p.readAsDataURL(c)}},V=s=>{s.preventDefault(),w(!0),F(route("master.settings.update"),{onFinish:()=>w(!1),forceFormData:!0})};return e.jsxs(U,{header:a("settings.title"),children:[e.jsx(M,{title:a("settings.title")}),e.jsx("div",{className:"flex-1 space-y-4 p-8 pt-6",children:e.jsx("div",{className:"mx-auto max-w-screen-2xl w-full",children:e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsxs(z,{defaultValue:"profile",className:"w-full",children:[e.jsxs(B,{className:"w-full justify-start border-b rounded-none p-0 h-auto bg-transparent",children:[e.jsx(T,{value:"profile",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:a("settings.companyProfile")}),e.jsx(T,{value:"accounting",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-4 py-2",children:a("settings.accountingTax")})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(k,{value:"profile",className:"mt-0 space-y-6",children:e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(j,{children:a("settings.companyInfo")}),e.jsx(L,{children:a("settings.companyInfoDesc")})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-6 pb-6 border-b",children:[e.jsxs("div",{onClick:()=>m.current?.click(),className:"cursor-pointer group relative",children:[e.jsxs(E,{className:"h-24 w-24 border-2 border-muted",children:[e.jsx(O,{src:A||l.logo_url,className:"object-cover"}),e.jsx(G,{className:"text-xl font-bold bg-primary/10 text-primary",children:t.name.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 rounded-full transition-opacity",children:e.jsx(J,{className:"text-white h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-medium leading-none",children:a("settings.companyLogo")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the avatar to upload a new logo."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",type:"button",onClick:()=>m.current?.click(),children:"Upload New"}),(A||l.logo_url)&&e.jsx(d,{variant:"ghost",size:"sm",type:"button",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>{r("logo",null),S(null)},children:"Remove"})]})]}),e.jsx("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:P})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.companyName")}),e.jsx(i,{value:t.name,onChange:s=>r("name",s.target.value)}),o.name&&e.jsx("p",{className:"text-sm text-red-500",children:o.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.registrationNo")}),e.jsx(i,{disabled:!0,value:l.ssm_number||"",placeholder:a("settings.setDuringOnboarding")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.email")}),e.jsx(i,{type:"email",value:t.email,onChange:s=>r("email",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.phone")}),e.jsx(i,{value:t.phone,onChange:s=>r("phone",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.address")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{value:t.address_1,onChange:s=>r("address_1",s.target.value),placeholder:"Address Line 1"}),e.jsx(i,{value:t.address_2,onChange:s=>r("address_2",s.target.value),placeholder:"Address Line 2 (Optional)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(i,{value:t.postcode,onChange:s=>r("postcode",s.target.value),placeholder:"Postcode"}),e.jsx(i,{value:t.city,onChange:s=>r("city",s.target.value),placeholder:"City"}),e.jsx(i,{value:t.state,onChange:s=>r("state",s.target.value),placeholder:"State"})]}),e.jsx(i,{value:t.country,onChange:s=>r("country",s.target.value),placeholder:"Country"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.website")}),e.jsx(i,{value:t.website,onChange:s=>r("website",s.target.value),placeholder:"https://..."}),o.website&&e.jsx("p",{className:"text-sm text-red-500",children:o.website})]})]})]})}),e.jsxs(k,{value:"accounting",className:"mt-0 space-y-6",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(j,{children:a("settings.taxSettings")})}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.sstNumber")}),e.jsx(i,{value:t.sst_number,onChange:s=>r("sst_number",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.defaultTaxRate")}),e.jsx(i,{type:"number",step:"0.01",value:t.sst_rate,onChange:s=>r("sst_rate",Number(s.target.value))})]})]})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(j,{children:a("settings.glMapping")}),e.jsx(L,{children:a("settings.glMappingDesc")})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.arAccount")}),e.jsxs(b,{value:t.gl_settings.ar_account,onValueChange:s=>r("gl_settings",{...t.gl_settings,ar_account:s}),children:[e.jsx(y,{children:e.jsx(N,{placeholder:a("settings.selectAccount")})}),e.jsx(f,{children:D.map(s=>e.jsxs(_,{value:s.code,children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.salesAccount")}),e.jsxs(b,{value:t.gl_settings.sales_account,onValueChange:s=>r("gl_settings",{...t.gl_settings,sales_account:s}),children:[e.jsx(y,{children:e.jsx(N,{placeholder:a("settings.selectAccount")})}),e.jsx(f,{children:I.map(s=>e.jsxs(_,{value:s.code,children:[s.code," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:a("settings.taxAccount")}),e.jsxs(b,{value:t.gl_settings.tax_account,onValueChange:s=>r("gl_settings",{...t.gl_settings,tax_account:s}),children:[e.jsx(y,{children:e.jsx(N,{placeholder:a("settings.selectAccount")})}),e.jsx(f,{children:R.map(s=>e.jsxs(_,{value:s.code,children:[s.code," - ",s.name]},s.id))})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:a("master.cancel")}),e.jsxs(d,{type:"submit",disabled:C,children:[C&&e.jsx(K,{className:"mr-2 h-4 w-4 animate-spin"}),a("settings.save")]})]})]})})})]})}export{Ne as default};
