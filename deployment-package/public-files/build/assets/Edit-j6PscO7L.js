const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-De9YtYVO.js","assets/app-DHuCQXno.css"])))=>i.map(i=>d[i]);
import{j as e,H as w,L as D,_ as P}from"./app-De9YtYVO.js";import{D as T}from"./DashboardLayout-DB0kk3mn.js";import{B as _,a as I}from"./index-sqIKGjOx.js";import{C as g,a as C,b,c as f}from"./card-B1noy23o.js";import{I as v}from"./input-YJ4y34zb.js";import{T as E}from"./textarea-BrFMof27.js";import{F as L,a as l,b as o,c as d,d as c,e as m}from"./form-CEzIzXmo.js";import{S as u,a as p,b as h,c as j,d as i}from"./select-B2rqhBdx.js";import{P as q,a as A,b as B,C as H}from"./calendar-DDO4Otf0.js";import{u as R,a as M,o as Q,s as x,n as y,d as G}from"./schemas-9rN0axaX.js";import{u as O}from"./useTranslation-CmIvGiqX.js";import{C as U}from"./calendar-DaZVa6bq.js";import{f as $}from"./format-BS8Ay9AX.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./dialog-B_EPHwqc.js";import"./label-BNYjQoyA.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";import"./chevron-left-BEvpDX_2.js";const z=Q({date:G(),expense_category_id:x().min(1,"Category is required"),amount:y().min(.01,"Amount must be greater than 0"),tax_amount:y().min(0).optional().nullable(),reference_number:x().optional().nullable(),description:x().min(1,"Description is required"),supplier_id:x().optional().nullable(),bank_account_id:x().optional().nullable(),payment_method:x().optional().nullable()});function Ne({expense:a,categories:S,suppliers:N,bankAccounts:F}){const{t:n}=O(),t=R({resolver:M(z),defaultValues:{date:new Date(a.date),expense_category_id:a.expense_category_id.toString(),amount:parseFloat(a.amount),tax_amount:a.tax_amount?parseFloat(a.tax_amount):0,reference_number:a.reference_number||"",description:a.description,supplier_id:a.supplier_id?a.supplier_id.toString():"0",bank_account_id:a.bank_account_id?a.bank_account_id.toString():"",payment_method:a.payment_method||""}}),k=r=>{P(async()=>{const{router:s}=await import("./app-De9YtYVO.js").then(V=>V.l);return{router:s}},__vite__mapDeps([0,1])).then(({router:s})=>{s.put(route("purchase.expenses.update",a.id),{...r,expense_category_id:parseInt(r.expense_category_id),supplier_id:r.supplier_id&&r.supplier_id!=="0"?parseInt(r.supplier_id):null,bank_account_id:r.bank_account_id?parseInt(r.bank_account_id):null})})};return e.jsxs(T,{header:n("expenses.editHeader",{id:a.id}),children:[e.jsx(w,{title:n("expenses.editTitle",{id:a.id})}),e.jsx("div",{className:"max-w-4xl mx-auto py-6",children:e.jsx(L,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(k),className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(g,{className:"h-full",children:[e.jsx(C,{children:e.jsx(b,{children:n("expenses.details")})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx(l,{control:t.control,name:"date",render:({field:r})=>e.jsxs(o,{className:"flex flex-col",children:[e.jsx(d,{children:n("expenses.date")}),e.jsxs(q,{children:[e.jsx(A,{asChild:!0,children:e.jsx(c,{children:e.jsxs(_,{variant:"outline",className:I("w-full pl-3 text-left font-normal",!r.value&&"text-muted-foreground"),children:[r.value?$(r.value,"PPP"):e.jsx("span",{children:n("expenses.pickDate")}),e.jsx(U,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(B,{className:"w-auto p-0",align:"start",children:e.jsx(H,{mode:"single",selected:r.value,onSelect:r.onChange,disabled:s=>s>new Date||s<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(m,{})]})}),e.jsx(l,{control:t.control,name:"description",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:n("expenses.description")}),e.jsx(c,{children:e.jsx(E,{...r})}),e.jsx(m,{})]})}),e.jsx(l,{control:t.control,name:"expense_category_id",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:n("expenses.category")}),e.jsxs(u,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(c,{children:e.jsx(p,{children:e.jsx(h,{placeholder:n("expenses.selectCategory")})})}),e.jsx(j,{children:S.map(s=>e.jsx(i,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(m,{})]})}),e.jsx(l,{control:t.control,name:"supplier_id",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:n("expenses.payee")}),e.jsxs(u,{onValueChange:r.onChange,defaultValue:r.value||"0",children:[e.jsx(c,{children:e.jsx(p,{children:e.jsx(h,{placeholder:n("expenses.selectSupplier")})})}),e.jsxs(j,{children:[e.jsx(i,{value:"0",children:"None / General"}),N.map(s=>e.jsx(i,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsx(m,{})]})})]})]}),e.jsxs(g,{className:"h-full",children:[e.jsx(C,{children:e.jsx(b,{children:n("expenses.paymentAmount")})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx(l,{control:t.control,name:"amount",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:n("expenses.amount")}),e.jsx(c,{children:e.jsx(v,{type:"number",step:"0.01",...r,onChange:s=>r.onChange(parseFloat(s.target.value))})}),e.jsx(m,{})]})}),e.jsx(l,{control:t.control,name:"bank_account_id",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:n("expenses.paidFrom")}),e.jsxs(u,{onValueChange:r.onChange,defaultValue:r.value||"",children:[e.jsx(c,{children:e.jsx(p,{children:e.jsx(h,{placeholder:n("expenses.selectAccount")})})}),e.jsx(j,{children:F.map(s=>e.jsxs(i,{value:s.id.toString(),children:[s.bank_name," - ",s.account_number||"Cash"]},s.id))})]}),e.jsx(m,{})]})}),e.jsx(l,{control:t.control,name:"reference_number",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:n("expenses.reference")}),e.jsx(c,{children:e.jsx(v,{...r,value:r.value||""})}),e.jsx(m,{})]})}),e.jsx(l,{control:t.control,name:"payment_method",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Payment Method"}),e.jsxs(u,{onValueChange:r.onChange,defaultValue:r.value||"",children:[e.jsx(c,{children:e.jsx(p,{children:e.jsx(h,{placeholder:"Select method"})})}),e.jsxs(j,{children:[e.jsx(i,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(i,{value:"Cash",children:"Cash"}),e.jsx(i,{value:"Cheque",children:"Cheque"}),e.jsx(i,{value:"Credit Card",children:"Credit Card"}),e.jsx(i,{value:"DuitNow/QR",children:"DuitNow/QR"})]})]}),e.jsx(m,{})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(_,{variant:"outline",asChild:!0,children:e.jsx(D,{href:route("purchase.expenses.index"),children:"Cancel"})}),e.jsx(_,{type:"submit",disabled:t.formState.isSubmitting,children:"Update Expense"})]})]})})})]})}export{Ne as default};
