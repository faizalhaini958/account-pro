import{r as v,j as e,H as S,a as w}from"./app-De9YtYVO.js";import{D as C}from"./DashboardLayout-DB0kk3mn.js";import{B as j}from"./index-sqIKGjOx.js";import{C as u,a as g,b as y,c as b,d as D}from"./card-B1noy23o.js";import{T as M,a as T,b as c,c as i,d as B,e as t}from"./table-3xAxy9mO.js";import{S as L,a as H,b as I,c as P,d as E}from"./select-B2rqhBdx.js";import{I as N}from"./input-YJ4y34zb.js";import{L as h}from"./label-BNYjQoyA.js";import{f as n}from"./format-D9s8ZFBe.js";import{S as F}from"./search-BkjZB7Ok.js";import{P as G}from"./printer-BkykoFHy.js";import{f as p}from"./format-BS8Ay9AX.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./useTranslation-CmIvGiqX.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./dialog-B_EPHwqc.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";function he({accounts:f,filters:d,ledger:s}){const[r,l]=v.useState({account_id:d.account_id||"",start_date:d.start_date,end_date:d.end_date}),_=()=>{w.get(route("accounting.general-ledger"),r,{preserveState:!0})};let o=s?s.opening_balance:0;return e.jsxs(C,{header:"General Ledger",children:[e.jsx(S,{title:"General Ledger"}),e.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[e.jsxs(u,{className:"print:hidden",children:[e.jsx(g,{className:"pb-3",children:e.jsx(y,{children:"Filter Ledger"})}),e.jsx(b,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(h,{children:"Account"}),e.jsxs(L,{value:r.account_id,onValueChange:a=>l({...r,account_id:a}),children:[e.jsx(H,{children:e.jsx(I,{placeholder:"Select Account"})}),e.jsx(P,{children:f.map(a=>e.jsxs(E,{value:a.id.toString(),children:[a.code," - ",a.name]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"Start Date"}),e.jsx(N,{type:"date",value:r.start_date,onChange:a=>l({...r,start_date:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{children:"End Date"}),e.jsx(N,{type:"date",value:r.end_date,onChange:a=>l({...r,end_date:a.target.value})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(j,{onClick:_,className:"flex-1",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," View"]}),e.jsx(j,{variant:"outline",onClick:()=>window.print(),children:e.jsx(G,{className:"h-4 w-4"})})]})]})})]}),s?e.jsx("div",{className:"space-y-4",children:e.jsxs(u,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(y,{children:s.account.name}),e.jsx(D,{children:s.account.code})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:["Period: ",p(new Date(d.start_date),"dd MMM yyyy")," - ",p(new Date(d.end_date),"dd MMM yyyy")]})]})}),e.jsx(b,{children:e.jsxs(M,{children:[e.jsx(T,{children:e.jsxs(c,{children:[e.jsx(i,{className:"w-[120px]",children:"Date"}),e.jsx(i,{className:"w-[150px]",children:"Reference"}),e.jsx(i,{children:"Description"}),e.jsx(i,{className:"text-right w-[120px]",children:"Debit"}),e.jsx(i,{className:"text-right w-[120px]",children:"Credit"}),e.jsx(i,{className:"text-right w-[120px]",children:"Balance"})]})}),e.jsxs(B,{children:[e.jsxs(c,{className:"bg-muted/30 font-medium",children:[e.jsx(t,{colSpan:3,children:"Opening Balance"}),e.jsx(t,{className:"text-right",children:s.opening_balance>0?n(s.opening_balance):"-"}),e.jsx(t,{className:"text-right",children:s.opening_balance<0?n(Math.abs(s.opening_balance)):"-"}),e.jsx(t,{className:"text-right",children:n(s.opening_balance)})]}),s.lines.map(a=>{const m=a.type==="debit"?parseFloat(a.amount):0,x=a.type==="credit"?parseFloat(a.amount):0;return o+=m-x,e.jsxs(c,{children:[e.jsx(t,{children:p(new Date(a.journal_entry.date),"dd/MM/yyyy")}),e.jsx(t,{className:"font-mono text-xs",children:a.journal_entry.entry_number}),e.jsx(t,{className:"max-w-[300px] truncate",title:a.description||a.journal_entry.description,children:a.description||a.journal_entry.description}),e.jsx(t,{className:"text-right text-green-600",children:m>0?n(m):"-"}),e.jsx(t,{className:"text-right text-orange-600",children:x>0?n(x):"-"}),e.jsx(t,{className:"text-right font-medium",children:n(o)})]},a.id)}),e.jsxs(c,{className:"bg-muted font-bold border-t-2",children:[e.jsx(t,{colSpan:5,className:"text-right",children:"Closing Balance"}),e.jsx(t,{className:"text-right",children:n(o)})]}),s.lines.length===0&&e.jsx(c,{children:e.jsx(t,{colSpan:6,className:"text-center py-6 text-muted-foreground",children:"No transactions found in this period."})})]})]})})]})}):e.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:"Select an account to view the General Ledger."})]}),e.jsx("style",{children:`
                @media print {
                    body * {
                        visibility: hidden;
                    }
                    .py-6, .py-6 * {
                        visibility: visible;
                    }
                    nav, header, aside, .print\\:hidden {
                        display: none !important;
                    }
                }
            `})]})}export{he as default};
