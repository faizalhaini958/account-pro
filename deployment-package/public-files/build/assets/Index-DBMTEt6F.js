import{r as C,j as e,H as S,a as w}from"./app-De9YtYVO.js";import{D}from"./DashboardLayout-DB0kk3mn.js";import{B as u}from"./index-sqIKGjOx.js";import{C as y,a as b,b as g,d as N,c as f}from"./card-B1noy23o.js";import{T as k,a as B,b as d,c as i,d as M,e as t}from"./table-3xAxy9mO.js";import{S as T,a as H,b as P,c as I,d as R}from"./select-B2rqhBdx.js";import{I as _}from"./input-YJ4y34zb.js";import{L as p}from"./label-BNYjQoyA.js";import{f as n}from"./format-D9s8ZFBe.js";import{S as V}from"./search-BkjZB7Ok.js";import{P as A}from"./printer-BkykoFHy.js";import{f as j}from"./format-BS8Ay9AX.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./useTranslation-CmIvGiqX.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./dialog-B_EPHwqc.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";function he({accounts:o,filters:c,ledger:s}){const[r,l]=C.useState({account_id:c.account_id||(o.length>0?o[0].id.toString():""),start_date:c.start_date,end_date:c.end_date}),v=()=>{w.get(route("accounting.cashbook"),r,{preserveState:!0})};let m=s?s.opening_balance:0;return e.jsxs(D,{header:"Cashbook",children:[e.jsx(S,{title:"Cashbook"}),e.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[e.jsxs(y,{className:"print:hidden",children:[e.jsxs(b,{className:"pb-3",children:[e.jsx(g,{children:"Cash & Bank Accounts"}),e.jsx(N,{children:"View receipts and payments for your cash and bank accounts."})]}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(p,{children:"Select Account"}),e.jsxs(T,{value:r.account_id,onValueChange:a=>l({...r,account_id:a}),children:[e.jsx(H,{children:e.jsx(P,{placeholder:"Select Cash/Bank Account"})}),e.jsx(I,{children:o.map(a=>e.jsxs(R,{value:a.id.toString(),children:[a.code," - ",a.name]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Start Date"}),e.jsx(_,{type:"date",value:r.start_date,onChange:a=>l({...r,start_date:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"End Date"}),e.jsx(_,{type:"date",value:r.end_date,onChange:a=>l({...r,end_date:a.target.value})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(u,{onClick:v,className:"flex-1",children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," View"]}),e.jsx(u,{variant:"outline",onClick:()=>window.print(),children:e.jsx(A,{className:"h-4 w-4"})})]})]})})]}),s?e.jsx("div",{className:"space-y-4",children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(g,{children:s.account.name}),e.jsx(N,{children:s.account.code})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:["Period: ",j(new Date(c.start_date),"dd MMM yyyy")," - ",j(new Date(c.end_date),"dd MMM yyyy")]})]})}),e.jsx(f,{children:e.jsxs(k,{children:[e.jsx(B,{children:e.jsxs(d,{children:[e.jsx(i,{className:"w-[120px]",children:"Date"}),e.jsx(i,{className:"w-[150px]",children:"Reference"}),e.jsx(i,{children:"Description"}),e.jsx(i,{className:"text-right w-[120px]",children:"Receipts (Dr)"}),e.jsx(i,{className:"text-right w-[120px]",children:"Payments (Cr)"}),e.jsx(i,{className:"text-right w-[120px]",children:"Balance"})]})}),e.jsxs(M,{children:[e.jsxs(d,{className:"bg-muted/30 font-medium",children:[e.jsx(t,{colSpan:3,children:"Opening Balance"}),e.jsx(t,{className:"text-right text-green-600",children:s.opening_balance>0?n(s.opening_balance):"-"}),e.jsx(t,{className:"text-right text-orange-600",children:s.opening_balance<0?n(Math.abs(s.opening_balance)):"-"}),e.jsx(t,{className:"text-right",children:n(s.opening_balance)})]}),s.lines.map(a=>{const x=a.type==="debit"?parseFloat(a.amount):0,h=a.type==="credit"?parseFloat(a.amount):0;return m+=x-h,e.jsxs(d,{children:[e.jsx(t,{children:j(new Date(a.journal_entry.date),"dd/MM/yyyy")}),e.jsx(t,{className:"font-mono text-xs",children:a.journal_entry.entry_number}),e.jsx(t,{className:"max-w-[300px] truncate",title:a.description||a.journal_entry.description,children:a.description||a.journal_entry.description}),e.jsx(t,{className:"text-right text-green-600",children:x>0?n(x):"-"}),e.jsx(t,{className:"text-right text-orange-600",children:h>0?n(h):"-"}),e.jsx(t,{className:"text-right font-medium",children:n(m)})]},a.id)}),e.jsxs(d,{className:"bg-muted font-bold border-t-2",children:[e.jsx(t,{colSpan:5,className:"text-right",children:"Closing Balance"}),e.jsx(t,{className:"text-right",children:n(m)})]}),s.lines.length===0&&e.jsx(d,{children:e.jsx(t,{colSpan:6,className:"text-center py-6 text-muted-foreground",children:"No transactions found in this period."})})]})]})})]})}):e.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:o.length===0?"No Cash or Bank accounts found.":"Select an account to view the Cashbook."})]}),e.jsx("style",{children:`
                @media print {
                    body * {
                        visibility: hidden;
                    }
                    .py-6, .py-6 * {
                        visibility: visible;
                    }
                    nav, header, aside, .print\\:hidden {
                        display: none !important;
                    }
                }
            `})]})}export{he as default};
