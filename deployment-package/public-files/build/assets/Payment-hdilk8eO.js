import{u as C,r as w,j as e,L as k}from"./app-De9YtYVO.js";import{D as S}from"./DashboardLayout-DB0kk3mn.js";import{B as c}from"./index-sqIKGjOx.js";import{C as u,a as x,b as h,c as p,d as T}from"./card-B1noy23o.js";import{L as l}from"./label-BNYjQoyA.js";import{I as i}from"./input-YJ4y34zb.js";import{T as D}from"./textarea-BrFMof27.js";import{S as j,a as f,b,c as g,d as n}from"./select-B2rqhBdx.js";import{I as d}from"./InputError-CwsED-D-.js";import{f as m}from"./format-D9s8ZFBe.js";import{u as I}from"./useTranslation-CmIvGiqX.js";import{A as F}from"./arrow-left-BQixkFZB.js";import{S as R}from"./save-DXCDbh1p.js";import"./toaster-CljvMPLZ.js";import"./Combination-Dy-FKPUP.js";import"./dropdown-menu-BBgrL1DT.js";import"./index-DEhQiHRI.js";import"./x-D7kv7_oa.js";import"./dialog-B_EPHwqc.js";import"./plus-DIUrj948.js";import"./file-text-D4ZH2B6r.js";import"./building-2-B8zwlaZI.js";import"./users-Cw2EaZtR.js";import"./package-DX_4eLNa.js";import"./LanguageSwitcher-JaZwuRsp.js";import"./globe-BnAvlmAt.js";import"./ThemeToggle-IPjgC8LT.js";import"./circle-alert-nT1vmDMj.js";import"./index-CENxNQLL.js";function ie({invoice:a,bankAccounts:y}){const{t:P}=I(),{data:t,setData:r,post:N,processing:v,errors:o}=C({customer_id:a.customer_id,bank_account_id:"",date:new Date().toISOString().split("T")[0],reference_number:"",payment_method:"Bank Transfer",amount:a.outstanding_amount,notes:`Payment for ${a.number}`,allocations:[{invoice_id:a.id,amount:a.outstanding_amount}]});w.useEffect(()=>{r("allocations",[{invoice_id:a.id,amount:t.amount}])},[t.amount]);const _=s=>{s.preventDefault(),N(route("sales.receipts.store"))};return e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(k,{href:route("sales.invoices.index"),className:"flex items-center text-muted-foreground hover:text-foreground mb-2",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Record Payment"}),e.jsxs("p",{className:"text-muted-foreground",children:["Record a payment for Invoice ",a.number]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(u,{className:"md:col-span-1",children:[e.jsx(x,{children:e.jsx(h,{children:"Invoice Details"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Invoice No."}),e.jsx("span",{className:"font-medium",children:a.number})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Customer"}),e.jsx("span",{className:"font-medium",children:a.customer.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Original Total"}),e.jsx("span",{className:"font-medium",children:m(a.total)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Paid Amount"}),e.jsx("span",{className:"font-medium text-green-600",children:m(a.paid_amount)})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-muted-foreground font-bold",children:"Outstanding"}),e.jsx("span",{className:"font-bold text-red-600",children:m(a.outstanding_amount)})]})]})]}),e.jsxs(u,{className:"md:col-span-2",children:[e.jsxs(x,{children:[e.jsx(h,{children:"Payment Information"}),e.jsx(T,{children:"Enter the payment details below."})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(i,{id:"date",type:"date",value:t.date,onChange:s=>r("date",s.target.value),required:!0}),e.jsx(d,{message:o.date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs(j,{value:t.payment_method,onValueChange:s=>r("payment_method",s),children:[e.jsx(f,{children:e.jsx(b,{placeholder:"Select method"})}),e.jsxs(g,{children:[e.jsx(n,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(n,{value:"Cash",children:"Cash"}),e.jsx(n,{value:"Cheque",children:"Cheque"}),e.jsx(n,{value:"Credit Card",children:"Credit Card"}),e.jsx(n,{value:"DuitNow/QR",children:"DuitNow/QR"}),e.jsx(n,{value:"Online Transfer",children:"Online Transfer"})]})]}),e.jsx(d,{message:o.payment_method})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"bank_account",children:"Deposit To"}),e.jsxs(j,{value:t.bank_account_id,onValueChange:s=>r("bank_account_id",s),children:[e.jsx(f,{children:e.jsx(b,{placeholder:"Select bank account"})}),e.jsx(g,{children:y.map(s=>e.jsxs(n,{value:s.id.toString(),children:[s.bank_name," - ",s.account_number]},s.id))})]}),e.jsx(d,{message:o.bank_account_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"reference_number",children:"Reference"}),e.jsx(i,{id:"reference_number",value:t.reference_number,onChange:s=>r("reference_number",s.target.value),placeholder:"e.g. TRX-123456"}),e.jsx(d,{message:o.reference_number})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"amount",children:"Amount"}),e.jsx(i,{id:"amount",type:"number",step:"0.01",value:t.amount,onChange:s=>r("amount",parseFloat(s.target.value)),required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will automatically allocate this amount to the current invoice."}),e.jsx(d,{message:o.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"notes",children:"Notes"}),e.jsx(D,{id:"notes",value:t.notes,onChange:s=>r("notes",s.target.value)}),e.jsx(d,{message:o.notes})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsxs(c,{type:"submit",disabled:v,children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Record Payment"]})]})]})})]})]})]})})}export{ie as default};
